import{M as tt,S as We,i as Ze,s as Ue,k as y,q as C,a as M,l as w,m as b,r as $,h as E,c as F,n as L,K as Z,b as ne,C as g,N as Hn,L as re,u as Ct,O as _n,P as Yn,D as Ye,Q as ut,p as ye,R as vn,T as nt,U as En,V as Dn,W as yn,v as ft,f as ht,g as ee,d as se,y as Ce,z as $e,A as Me,B as Fe,X as qn,J as wn,e as ot,E as jn,F as Xn,G as Kn,H as Jn,w as Qn}from"../chunks/index.96eae084.js";import{s as ke,l as qe,r as bn,i as Tn,a as In,c as eo,I as to,f as On}from"../chunks/stores.46f67ff1.js";function no(t){const e=t-1;return e*e*e+1}function An(t,{from:e,to:n},o={}){const r=getComputedStyle(t),i=r.transform==="none"?"":r.transform,[s,l]=r.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*s/n.width-(n.left+s),c=e.top+e.height*l/n.height-(n.top+l),{delay:d=0,duration:u=h=>Math.sqrt(h)*120,easing:f=no}=o;return{delay:d,duration:tt(u)?u(Math.sqrt(a*a+c*c)):u,easing:f,css:(h,p)=>{const m=p*a,T=p*c,_=h+p*e.width/n.width,R=h+p*e.height/n.height;return`transform: ${i} translate(${m}px, ${T}px) scale(${_}, ${R});`}}}const oo="finalize",ro="consider";function Ge(t,e,n){t.dispatchEvent(new CustomEvent(oo,{detail:{items:e,info:n}}))}function Ie(t,e,n){t.dispatchEvent(new CustomEvent(ro,{detail:{items:e,info:n}}))}const gt="draggedEntered",Ke="draggedLeft",mt="draggedOverIndex",$t="draggedLeftDocument",rt={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function so(t,e,n){t.dispatchEvent(new CustomEvent(gt,{detail:{indexObj:e,draggedEl:n}}))}function io(t,e,n){t.dispatchEvent(new CustomEvent(Ke,{detail:{draggedEl:e,type:rt.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function lo(t,e){t.dispatchEvent(new CustomEvent(Ke,{detail:{draggedEl:e,type:rt.OUTSIDE_OF_ANY}}))}function ao(t,e,n){t.dispatchEvent(new CustomEvent(mt,{detail:{indexObj:e,draggedEl:n}}))}function co(t){window.dispatchEvent(new CustomEvent($t,{detail:{draggedEl:t}}))}const oe={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:gt,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:mt,DRAGGED_LEFT:Ke,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},ie={POINTER:"pointer",KEYBOARD:"keyboard"},pt="isDndShadowItem",Mt="data-is-dnd-shadow-item",Ft="id:dnd-shadow-placeholder-0000",uo="dnd-action-dragged-el";let K="id",Ot=0;function Rn(){Ot++}function Nn(){if(Ot===0)throw new Error("Bug! trying to decrement when there are no dropzones");Ot--}const xt=typeof window>"u";function Sn(t){let e;const n=t.getBoundingClientRect(),o=getComputedStyle(t),r=o.transform;if(r){let i,s,l,a;if(r.startsWith("matrix3d("))e=r.slice(9,-1).split(/, /),i=+e[0],s=+e[5],l=+e[12],a=+e[13];else if(r.startsWith("matrix("))e=r.slice(7,-1).split(/, /),i=+e[0],s=+e[3],l=+e[4],a=+e[5];else return n;const c=o.transformOrigin,d=n.x-l-(1-i)*parseFloat(c),u=n.y-a-(1-s)*parseFloat(c.slice(c.indexOf(" ")+1)),f=i?n.width/i:t.offsetWidth,h=s?n.height/s:t.offsetHeight;return{x:d,y:u,width:f,height:h,top:u,right:d+f,bottom:u+h,left:d}}else return n}function Ln(t){const e=Sn(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Gt(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Pn(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function fo(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Vt(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function je(t){return Pn(Gt(t))}function jt(t,e){const n=je(t),o=Ln(e);return Vt(n,o)}function ho(t,e){const n=je(t),o=je(e);return fo(n,o)}function go(t){const e=Gt(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}function mo(t,e){const n=Gt(e);return Vt(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}let Ne;function Bt(){Ne=new Map}Bt();function po(t){Ne.delete(t)}function _o(t){const e=Array.from(t.children).findIndex(n=>n.getAttribute(Mt));if(e>=0)return Ne.has(t)||Ne.set(t,new Map),Ne.get(t).set(e,Ln(t.children[e])),e}function vo(t,e){if(!jt(t,e))return null;const n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};const o=_o(e);for(let s=0;s<n.length;s++)if(jt(t,n[s])){const l=Ne.has(e)&&Ne.get(e).get(s);return l&&!Vt(je(t),l)?{index:o,isProximityBased:!1}:{index:s,isProximityBased:!1}}let r=Number.MAX_VALUE,i;for(let s=0;s<n.length;s++){const l=ho(t,n[s]);l<r&&(r=l,i=s)}return{index:i,isProximityBased:!0}}const He=25;function kn(){let t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(i){const{directionObj:s,stepPx:l}=t;s&&(i.scrollBy(s.x*l,s.y*l),window.requestAnimationFrame(()=>n(i)))}function o(i){return He-i}function r(i,s){if(!s)return!1;const l=mo(i,s);if(l===null)return e(),!1;const a=!!t.directionObj;let[c,d]=[!1,!1];return s.scrollHeight>s.clientHeight&&(l.bottom<He?(c=!0,t.directionObj={x:0,y:1},t.stepPx=o(l.bottom)):l.top<He&&(c=!0,t.directionObj={x:0,y:-1},t.stepPx=o(l.top)),!a&&c)||s.scrollWidth>s.clientWidth&&(l.right<He?(d=!0,t.directionObj={x:1,y:0},t.stepPx=o(l.right)):l.left<He&&(d=!0,t.directionObj={x:-1,y:0},t.stepPx=o(l.left)),!a&&d)?(n(s),!0):(e(),!1)}return{scrollIfNeeded:r,resetScrolling:e}}function Tt(t){return JSON.stringify(t,null,2)}function Xt(t){if(!t)throw new Error("cannot get depth of a falsy node");return Cn(t,0)}function Cn(t,e=0){return t.parentElement?Cn(t.parentElement,e+1):e-1}function Eo(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function Do(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const yo=200,Kt=10,{scrollIfNeeded:wo,resetScrolling:bo}=kn();let At;function To(t,e,n=yo){let o,r,i=!1,s;const l=Array.from(e).sort((c,d)=>Xt(d)-Xt(c));function a(){const c=je(t),d=wo(c,o);if(!d&&s&&Math.abs(s.x-c.x)<Kt&&Math.abs(s.y-c.y)<Kt){At=window.setTimeout(a,n);return}if(go(t)){co(t);return}s=c;let u=!1;for(const f of l){d&&po(o);const h=vo(t,f);if(h===null)continue;const{index:p}=h;u=!0,f!==o?(o&&io(o,t,f),so(f,h,t),o=f):p!==r&&(ao(f,h,t),r=p);break}!u&&i&&o?(lo(o,t),o=void 0,r=void 0,i=!1):i=!0,At=window.setTimeout(a,n)}a()}function Io(){clearTimeout(At),bo(),Bt()}const Oo=300;let st;function it(t){const e=t.touches?t.touches[0]:t;st={x:e.clientX,y:e.clientY}}const{scrollIfNeeded:Ao,resetScrolling:Ro}=kn();let $n;function Mn(){st&&Ao(st,document.documentElement)&&Bt(),$n=window.setTimeout(Mn,Oo)}function No(){window.addEventListener("mousemove",it),window.addEventListener("touchmove",it),Mn()}function So(){window.removeEventListener("mousemove",it),window.removeEventListener("touchmove",it),st=void 0,window.clearTimeout($n),Ro()}function Lo(t){const e=t.cloneNode(!0),n=[],o=t.tagName==="SELECT",r=o?[t]:[...t.querySelectorAll("select")];for(const s of r)n.push(s.value);if(r.length<=0)return e;const i=o?[e]:[...e.querySelectorAll("select")];for(let s=0;s<i.length;s++){const l=i[s],a=n[s],c=l.querySelector(`option[value="${a}"`);c&&c.setAttribute("selected",!0)}return e}const Po=.2;function Oe(t){return`${t} ${Po}s ease`}function ko(t,e){const n=t.getBoundingClientRect(),o=Lo(t);Fn(t,o),o.id=uo,o.style.position="fixed";let r=n.top,i=n.left;if(o.style.top=`${r}px`,o.style.left=`${i}px`,e){const s=Pn(n);r-=s.y-e.y,i-=s.x-e.x,window.setTimeout(()=>{o.style.top=`${r}px`,o.style.left=`${i}px`},0)}return o.style.margin="0",o.style.boxSizing="border-box",o.style.height=`${n.height}px`,o.style.width=`${n.width}px`,o.style.transition=`${Oe("top")}, ${Oe("left")}, ${Oe("background-color")}, ${Oe("opacity")}, ${Oe("color")} `,window.setTimeout(()=>o.style.transition+=`, ${Oe("width")}, ${Oe("height")}`,0),o.style.zIndex="9999",o.style.cursor="grabbing",o}function Co(t){t.style.cursor="grab"}function $o(t,e,n,o){Fn(e,t);const r=e.getBoundingClientRect(),i=t.getBoundingClientRect(),s=r.width-i.width,l=r.height-i.height;if(s||l){const a={left:(n-i.left)/i.width,top:(o-i.top)/i.height};t.style.height=`${r.height}px`,t.style.width=`${r.width}px`,t.style.left=`${parseFloat(t.style.left)-a.left*s}px`,t.style.top=`${parseFloat(t.style.top)-a.top*l}px`}}function Fn(t,e){const n=window.getComputedStyle(t);Array.from(n).filter(o=>o.startsWith("background")||o.startsWith("padding")||o.startsWith("font")||o.startsWith("text")||o.startsWith("align")||o.startsWith("justify")||o.startsWith("display")||o.startsWith("flex")||o.startsWith("border")||o==="opacity"||o==="color"||o==="list-style-type").forEach(o=>e.style.setProperty(o,n.getPropertyValue(o),n.getPropertyPriority(o)))}function Mo(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function xn(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function Fo(t){t.style.visibility="hidden",t.setAttribute(Mt,"true")}function xo(t){t.style.visibility="",t.removeAttribute(Mt)}function Qe(t,e=()=>{},n=()=>[]){t.forEach(o=>{const r=e(o);Object.keys(r).forEach(i=>{o.style[i]=r[i]}),n(o).forEach(i=>o.classList.add(i))})}function lt(t,e=()=>{},n=()=>[]){t.forEach(o=>{const r=e(o);Object.keys(r).forEach(i=>{o.style[i]=""}),n(o).forEach(i=>o.classList.contains(i)&&o.classList.remove(i))})}function Go(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}const Vo="--any--",Bo=100,Jt=3,Qt={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let De,Q,ue,_t,Y,vt,Ve,de,be,fe,Re=!1,Wt=!1,Zt,Je=!1,et=[];const pe=new Map,H=new Map,It=new WeakMap;function Wo(t,e){pe.has(e)||pe.set(e,new Set),pe.get(e).has(t)||(pe.get(e).add(t),Rn())}function en(t,e){pe.get(e).delete(t),Nn(),pe.get(e).size===0&&pe.delete(e)}function Zo(){No();const t=pe.get(_t);for(const n of t)n.addEventListener(gt,Gn),n.addEventListener(Ke,Vn),n.addEventListener(mt,Bn);window.addEventListener($t,Be);const e=Math.max(Bo,...Array.from(t.keys()).map(n=>H.get(n).dropAnimationDurationMs));To(Q,t,e*1.07)}function Uo(){So();const t=pe.get(_t);for(const e of t)e.removeEventListener(gt,Gn),e.removeEventListener(Ke,Vn),e.removeEventListener(mt,Bn);window.removeEventListener($t,Be),Io()}function zo(t){return t.findIndex(e=>e[K]===Ft)}function Et(t){return t.findIndex(e=>!!e[pt]&&e[K]!==Ft)}function Gn(t){let{items:e,dropFromOthersDisabled:n}=H.get(t.currentTarget);if(n&&t.currentTarget!==Y)return;if(Je=!1,e=e.filter(s=>s[K]!==Ve[K]),Y!==t.currentTarget){const l=H.get(Y).items.filter(a=>!a[pt]);Ie(Y,l,{trigger:oe.DRAGGED_ENTERED_ANOTHER,id:ue[K],source:ie.POINTER})}else{const s=zo(e);s!==-1&&e.splice(s,1)}const{index:o,isProximityBased:r}=t.detail.indexObj,i=r&&o===t.currentTarget.children.length-1?o+1:o;de=t.currentTarget,e.splice(i,0,Ve),Ie(t.currentTarget,e,{trigger:oe.DRAGGED_ENTERED,id:ue[K],source:ie.POINTER})}function Vn(t){if(!Re)return;const{items:e,dropFromOthersDisabled:n}=H.get(t.currentTarget);if(n&&t.currentTarget!==Y&&t.currentTarget!==de)return;const o=Et(e),r=e.splice(o,1)[0];de=void 0;const{type:i,theOtherDz:s}=t.detail;if(i===rt.OUTSIDE_OF_ANY||i===rt.LEFT_FOR_ANOTHER&&s!==Y&&H.get(s).dropFromOthersDisabled){Je=!0,de=Y;const l=H.get(Y).items;l.splice(vt,0,r),Ie(Y,l,{trigger:oe.DRAGGED_LEFT_ALL,id:ue[K],source:ie.POINTER})}Ie(t.currentTarget,e,{trigger:oe.DRAGGED_LEFT,id:ue[K],source:ie.POINTER})}function Bn(t){const{items:e,dropFromOthersDisabled:n}=H.get(t.currentTarget);if(n&&t.currentTarget!==Y)return;Je=!1;const{index:o}=t.detail.indexObj,r=Et(e);e.splice(r,1),e.splice(o,0,Ve),Ie(t.currentTarget,e,{trigger:oe.DRAGGED_OVER_INDEX,id:ue[K],source:ie.POINTER})}function at(t){t.preventDefault();const e=t.touches?t.touches[0]:t;fe={x:e.clientX,y:e.clientY},Q.style.transform=`translate3d(${fe.x-be.x}px, ${fe.y-be.y}px, 0)`}function Be(){Wt=!0,window.removeEventListener("mousemove",at),window.removeEventListener("touchmove",at),window.removeEventListener("mouseup",Be),window.removeEventListener("touchend",Be),Uo(),Co(Q),de||(de=Y);let{items:t,type:e}=H.get(de);lt(pe.get(e),r=>H.get(r).dropTargetStyle,r=>H.get(r).dropTargetClasses);let n=Et(t);n===-1&&(n=vt),t=t.map(r=>r[pt]?ue:r);function o(){Zt(),Ge(de,t,{trigger:Je?oe.DROPPED_OUTSIDE_OF_ANY:oe.DROPPED_INTO_ZONE,id:ue[K],source:ie.POINTER}),de!==Y&&Ge(Y,H.get(Y).items,{trigger:oe.DROPPED_INTO_ANOTHER,id:ue[K],source:ie.POINTER}),xo(de.children[n]),qo()}Ho(n,o)}function Ho(t,e){const n=Sn(de.children[t]),o={x:n.left-parseFloat(Q.style.left),y:n.top-parseFloat(Q.style.top)},{dropAnimationDurationMs:r}=H.get(de),i=`transform ${r}ms ease`;Q.style.transition=Q.style.transition?Q.style.transition+","+i:i,Q.style.transform=`translate3d(${o.x}px, ${o.y}px, 0)`,window.setTimeout(e,r)}function Yo(t,e){et.push({dz:t,destroy:e}),window.requestAnimationFrame(()=>{xn(t),document.body.appendChild(t)})}function qo(){Q.remove(),De.remove(),et.length&&(et.forEach(({dz:t,destroy:e})=>{e(),t.remove()}),et=[]),Q=void 0,De=void 0,ue=void 0,_t=void 0,Y=void 0,vt=void 0,Ve=void 0,de=void 0,be=void 0,fe=void 0,Re=!1,Wt=!1,Zt=void 0,Je=!1}function jo(t,e){let n=!1;const o={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Qt,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let r=new Map;function i(){window.addEventListener("mousemove",a,{passive:!1}),window.addEventListener("touchmove",a,{passive:!1,capture:!1}),window.addEventListener("mouseup",l,{passive:!1}),window.addEventListener("touchend",l,{passive:!1})}function s(){window.removeEventListener("mousemove",a),window.removeEventListener("touchmove",a),window.removeEventListener("mouseup",l),window.removeEventListener("touchend",l)}function l(){s(),De=void 0,be=void 0,fe=void 0}function a(f){f.preventDefault();const h=f.touches?f.touches[0]:f;fe={x:h.clientX,y:h.clientY},(Math.abs(fe.x-be.x)>=Jt||Math.abs(fe.y-be.y)>=Jt)&&(s(),d())}function c(f){if(f.target!==f.currentTarget&&(f.target.value!==void 0||f.target.isContentEditable)||f.button||Re)return;f.stopPropagation();const h=f.touches?f.touches[0]:f;be={x:h.clientX,y:h.clientY},fe={...be},De=f.currentTarget,i()}function d(){Re=!0;const f=r.get(De);vt=f,Y=De.parentElement;const h=Y.getRootNode(),p=h.body||h,{items:m,type:T,centreDraggedOnCursor:_}=o;ue={...m[f]},_t=T,Ve={...ue,[pt]:!0};const R={...Ve,[K]:Ft};Q=ko(De,_&&fe);function v(){Q.parentElement?window.requestAnimationFrame(v):(p.appendChild(Q),Q.focus(),Zo(),xn(De),p.appendChild(De))}window.requestAnimationFrame(v),Qe(Array.from(pe.get(o.type)).filter(O=>O===Y||!H.get(O).dropFromOthersDisabled),O=>H.get(O).dropTargetStyle,O=>H.get(O).dropTargetClasses),m.splice(f,1,R),Zt=Go(Y),Ie(Y,m,{trigger:oe.DRAG_STARTED,id:ue[K],source:ie.POINTER}),window.addEventListener("mousemove",at,{passive:!1}),window.addEventListener("touchmove",at,{passive:!1,capture:!1}),window.addEventListener("mouseup",Be,{passive:!1}),window.addEventListener("touchend",Be,{passive:!1})}function u({items:f=void 0,flipDurationMs:h=0,type:p=Vo,dragDisabled:m=!1,morphDisabled:T=!1,dropFromOthersDisabled:_=!1,dropTargetStyle:R=Qt,dropTargetClasses:v=[],transformDraggedElement:O=()=>{},centreDraggedOnCursor:I=!1}){o.dropAnimationDurationMs=h,o.type&&p!==o.type&&en(t,o.type),o.type=p,Wo(t,p),o.items=[...f],o.dragDisabled=m,o.morphDisabled=T,o.transformDraggedElement=O,o.centreDraggedOnCursor=I,n&&Re&&!Wt&&(!Eo(R,o.dropTargetStyle)||!Do(v,o.dropTargetClasses))&&(lt([t],()=>o.dropTargetStyle,()=>v),Qe([t],()=>R,()=>v)),o.dropTargetStyle=R,o.dropTargetClasses=[...v];function k(S,N){return H.get(S)?H.get(S)[N]:o[N]}n&&Re&&o.dropFromOthersDisabled!==_&&(_?lt([t],S=>k(S,"dropTargetStyle"),S=>k(S,"dropTargetClasses")):Qe([t],S=>k(S,"dropTargetStyle"),S=>k(S,"dropTargetClasses"))),o.dropFromOthersDisabled=_,H.set(t,o);const G=Et(o.items);for(let S=0;S<t.children.length;S++){const N=t.children[S];if(Mo(N,m),S===G){o.transformDraggedElement(Q,ue,S),T||$o(Q,N,fe.x,fe.y),Fo(N);continue}N.removeEventListener("mousedown",It.get(N)),N.removeEventListener("touchstart",It.get(N)),m||(N.addEventListener("mousedown",c),N.addEventListener("touchstart",c),It.set(N,c)),r.set(N,S),n||(n=!0)}}return u(e),{update:f=>{u(f)},destroy:()=>{function f(){en(t,H.get(t).type),H.delete(t)}Re?Yo(t,f):f()}}}const Rt={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Wn={[Rt.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[Rt.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},Xo="dnd-action-aria-alert";let z;function Nt(){z||(z=document.createElement("div"),function(){z.id=Xo,z.style.position="fixed",z.style.bottom="0",z.style.left="0",z.style.zIndex="-5",z.style.opacity="0",z.style.height="0",z.style.width="0",z.setAttribute("role","alert")}(),document.body.prepend(z),Object.entries(Wn).forEach(([t,e])=>document.body.prepend(Qo(t,e))))}function Ko(){return xt?null:(document.readyState==="complete"?Nt():window.addEventListener("DOMContentLoaded",Nt),{...Rt})}function Jo(){xt||!z||(Object.keys(Wn).forEach(t=>{var e;return(e=document.getElementById(t))==null?void 0:e.remove()}),z.remove(),z=void 0)}function Qo(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function xe(t){if(xt)return;z||Nt(),z.innerHTML="";const e=document.createTextNode(t);z.appendChild(e),z.style.display="none",z.style.display="inline"}const er="--any--",tn={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let he=!1,St,te,Se="",Ae,Ee,Te="";const ct=new WeakSet,nn=new WeakMap,on=new WeakMap,Lt=new Map,J=new Map,me=new Map;let dt;function tr(t,e){me.size===0&&(dt=Ko(),window.addEventListener("keydown",Zn),window.addEventListener("click",Un)),me.has(e)||me.set(e,new Set),me.get(e).has(t)||(me.get(e).add(t),Rn())}function rn(t,e){te===t&&Xe(),me.get(e).delete(t),Nn(),me.get(e).size===0&&me.delete(e),me.size===0&&(window.removeEventListener("keydown",Zn),window.removeEventListener("click",Un),dt=void 0,Jo())}function Zn(t){if(he)switch(t.key){case"Escape":{Xe();break}}}function Un(){he&&(ct.has(document.activeElement)||Xe())}function nr(t){if(!he)return;const e=t.currentTarget;if(e===te)return;Se=e.getAttribute("aria-label")||"";const{items:n}=J.get(te),o=n.find(c=>c[K]===Ee),r=n.indexOf(o),i=n.splice(r,1)[0],{items:s,autoAriaDisabled:l}=J.get(e);e.getBoundingClientRect().top<te.getBoundingClientRect().top||e.getBoundingClientRect().left<te.getBoundingClientRect().left?(s.push(i),l||xe(`Moved item ${Te} to the end of the list ${Se}`)):(s.unshift(i),l||xe(`Moved item ${Te} to the beginning of the list ${Se}`)),Ge(te,n,{trigger:oe.DROPPED_INTO_ANOTHER,id:Ee,source:ie.KEYBOARD}),Ge(e,s,{trigger:oe.DROPPED_INTO_ZONE,id:Ee,source:ie.KEYBOARD}),te=e}function zn(){Lt.forEach(({update:t},e)=>t(J.get(e)))}function Xe(t=!0){J.get(te).autoAriaDisabled||xe(`Stopped dragging item ${Te}`),ct.has(document.activeElement)&&document.activeElement.blur(),t&&Ie(te,J.get(te).items,{trigger:oe.DRAG_STOPPED,id:Ee,source:ie.KEYBOARD}),lt(me.get(St),e=>J.get(e).dropTargetStyle,e=>J.get(e).dropTargetClasses),Ae=null,Ee=null,Te="",St=null,te=null,Se="",he=!1,zn()}function or(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:tn,dropTargetClasses:[],autoAriaDisabled:!1};function o(d,u,f){d.length<=1||d.splice(f,1,d.splice(u,1,d[f])[0])}function r(d){switch(d.key){case"Enter":case" ":{if((d.target.disabled!==void 0||d.target.href||d.target.isContentEditable)&&!ct.has(d.target))return;d.preventDefault(),d.stopPropagation(),he?Xe():i(d);break}case"ArrowDown":case"ArrowRight":{if(!he)return;d.preventDefault(),d.stopPropagation();const{items:u}=J.get(t),f=Array.from(t.children),h=f.indexOf(d.currentTarget);h<f.length-1&&(n.autoAriaDisabled||xe(`Moved item ${Te} to position ${h+2} in the list ${Se}`),o(u,h,h+1),Ge(t,u,{trigger:oe.DROPPED_INTO_ZONE,id:Ee,source:ie.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!he)return;d.preventDefault(),d.stopPropagation();const{items:u}=J.get(t),h=Array.from(t.children).indexOf(d.currentTarget);h>0&&(n.autoAriaDisabled||xe(`Moved item ${Te} to position ${h} in the list ${Se}`),o(u,h,h-1),Ge(t,u,{trigger:oe.DROPPED_INTO_ZONE,id:Ee,source:ie.KEYBOARD}));break}}}function i(d){l(d.currentTarget),te=t,St=n.type,he=!0;const u=Array.from(me.get(n.type)).filter(f=>f===te||!J.get(f).dropFromOthersDisabled);if(Qe(u,f=>J.get(f).dropTargetStyle,f=>J.get(f).dropTargetClasses),!n.autoAriaDisabled){let f=`Started dragging item ${Te}. Use the arrow keys to move it within its list ${Se}`;u.length>1&&(f+=", or tab to another list in order to move the item into it"),xe(f)}Ie(t,J.get(t).items,{trigger:oe.DRAG_STARTED,id:Ee,source:ie.KEYBOARD}),zn()}function s(d){he&&d.currentTarget!==Ae&&(d.stopPropagation(),Xe(!1),i(d))}function l(d){const{items:u}=J.get(t),f=Array.from(t.children),h=f.indexOf(d);Ae=d,Ae.tabIndex=0,Ee=u[h][K],Te=f[h].getAttribute("aria-label")||""}function a({items:d=[],type:u=er,dragDisabled:f=!1,zoneTabIndex:h=0,dropFromOthersDisabled:p=!1,dropTargetStyle:m=tn,dropTargetClasses:T=[],autoAriaDisabled:_=!1}){n.items=[...d],n.dragDisabled=f,n.dropFromOthersDisabled=p,n.zoneTabIndex=h,n.dropTargetStyle=m,n.dropTargetClasses=T,n.autoAriaDisabled=_,n.type&&u!==n.type&&rn(t,n.type),n.type=u,tr(t,u),_||(t.setAttribute("aria-disabled",f),t.setAttribute("role","list"),t.setAttribute("aria-describedby",f?dt.DND_ZONE_DRAG_DISABLED:dt.DND_ZONE_ACTIVE)),J.set(t,n),he?t.tabIndex=t===te||Ae.contains(t)||n.dropFromOthersDisabled||te&&n.type!==J.get(te).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",nr);for(let R=0;R<t.children.length;R++){const v=t.children[R];ct.add(v),v.tabIndex=he?-1:0,_||v.setAttribute("role","listitem"),v.removeEventListener("keydown",nn.get(v)),v.removeEventListener("click",on.get(v)),f||(v.addEventListener("keydown",r),nn.set(v,r),v.addEventListener("click",s),on.set(v,s)),he&&n.items[R][K]===Ee&&(Ae=v,Ae.tabIndex=0,v.focus())}}a(e);const c={update:d=>{a(d)},destroy:()=>{rn(t,n.type),J.delete(t),Lt.delete(t)}};return Lt.set(t,c),c}function rr(t,e){sn(e);const n=jo(t,e),o=or(t,e);return{update:r=>{sn(r),n.update(r),o.update(r)},destroy:()=>{n.destroy(),o.destroy()}}}function sn(t){const{items:e,flipDurationMs:n,type:o,dragDisabled:r,morphDisabled:i,dropFromOthersDisabled:s,zoneTabIndex:l,dropTargetStyle:a,dropTargetClasses:c,transformDraggedElement:d,autoAriaDisabled:u,centreDraggedOnCursor:f,...h}=t;if(Object.keys(h).length>0&&console.warn("dndzone will ignore unknown options",h),!e)throw new Error("no 'items' key provided to dndzone");const p=e.find(m=>!{}.hasOwnProperty.call(m,K));if(p)throw new Error(`missing '${K}' property for item ${Tt(p)}`);if(c&&!Array.isArray(c))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof c}, ${Tt(c)}`);if(l&&!sr(l))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof l}, ${Tt(l)}`)}function sr(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function ln(t,e,n){const o=t.slice();return o[12]=e[n],o[13]=e,o[14]=n,o}function an(t,e){let n,o,r,i="<",s,l,a,c,d,u="1",f,h,p,m="2",T,_,R,v="3",O,I,k,G="4",S,N,V,U="5",le,ae,B,x=">",q,X,P,D=e[12].name+"",A,W,ge,_e=Ye,ce,we;function ze(){e[11].call(c,e[14])}return{key:t,first:null,c(){n=y("div"),o=y("div"),r=y("div"),s=C(i),l=M(),a=y("div"),c=y("select"),d=y("option"),f=C(u),h=M(),p=y("option"),T=C(m),_=M(),R=y("option"),O=C(v),I=M(),k=y("option"),S=C(G),N=M(),V=y("option"),le=C(U),ae=M(),B=y("div"),q=C(x),X=M(),P=y("div"),A=C(D),W=M(),this.h()},l(ve){n=w(ve,"DIV",{class:!0,style:!0});var j=b(n);o=w(j,"DIV",{class:!0});var Le=b(o);r=w(Le,"DIV",{class:!0,style:!0});var Ut=b(r);s=$(Ut,i),Ut.forEach(E),l=F(Le),a=w(Le,"DIV",{class:!0});var zt=b(a);c=w(zt,"SELECT",{class:!0});var Pe=b(c);d=w(Pe,"OPTION",{});var Dt=b(d);f=$(Dt,u),h=F(Dt),Dt.forEach(E),p=w(Pe,"OPTION",{});var yt=b(p);T=$(yt,m),_=F(yt),yt.forEach(E),R=w(Pe,"OPTION",{});var wt=b(R);O=$(wt,v),I=F(wt),wt.forEach(E),k=w(Pe,"OPTION",{});var bt=b(k);S=$(bt,G),N=F(bt),bt.forEach(E),V=w(Pe,"OPTION",{});var Ht=b(V);le=$(Ht,U),Ht.forEach(E),Pe.forEach(E),zt.forEach(E),ae=F(Le),B=w(Le,"DIV",{class:!0,style:!0});var Yt=b(B);q=$(Yt,x),Yt.forEach(E),Le.forEach(E),X=F(j),P=w(j,"DIV",{class:!0});var qt=b(P);A=$(qt,D),qt.forEach(E),W=F(j),j.forEach(E),this.h()},h(){L(r,"class","leftbutton svelte-1jb2xq7"),ye(r,"font-weight","900"),Z(r,"hide",e[3]==0||e[12].name=="repeat ____ times:"),d.__value="1",d.value=d.__value,p.__value="2",p.value=p.__value,R.__value="3",R.value=R.__value,k.__value="4",k.value=k.__value,V.__value="5",V.value=V.__value,L(c,"class","selectDirect svelte-1jb2xq7"),e[4][e[14]]===void 0&&vn(ze),L(a,"class","selectRepeat svelte-1jb2xq7"),Z(a,"hide",e[3]==0||e[12].name!="repeat ____ times:"),L(B,"class","rightbutton svelte-1jb2xq7"),ye(B,"font-weight","900"),Z(B,"hide",e[3]==0||e[12].name=="repeat ____ times:"),L(o,"class","buttons svelte-1jb2xq7"),L(P,"class","name"),L(n,"class","card svelte-1jb2xq7"),ye(n,"margin-left",e[12].indent+"px"),Z(n,"toolbox",e[1]==="toolbox"),Z(n,"selected",e[2]==e[14]&&e[1]==="program"),this.first=n},m(ve,j){ne(ve,n,j),g(n,o),g(o,r),g(r,s),g(o,l),g(o,a),g(a,c),g(c,d),g(d,f),g(d,h),g(c,p),g(p,T),g(p,_),g(c,R),g(R,O),g(R,I),g(c,k),g(k,S),g(k,N),g(c,V),g(V,le),nt(c,e[4][e[14]],!0),g(o,ae),g(o,B),g(B,q),g(n,X),g(n,P),g(P,A),g(n,W),ce||(we=[re(r,"click",function(){tt(e[8](e[12]))&&e[8](e[12]).apply(this,arguments)}),re(c,"change",ze),re(c,"change",e[5]),re(B,"click",function(){tt(e[9](e[12]))&&e[9](e[12]).apply(this,arguments)})],ce=!0)},p(ve,j){e=ve,j&9&&Z(r,"hide",e[3]==0||e[12].name=="repeat ____ times:"),j&17&&nt(c,e[4][e[14]]),j&9&&Z(a,"hide",e[3]==0||e[12].name!="repeat ____ times:"),j&9&&Z(B,"hide",e[3]==0||e[12].name=="repeat ____ times:"),j&1&&D!==(D=e[12].name+"")&&Ct(A,D),j&1&&ye(n,"margin-left",e[12].indent+"px"),j&2&&Z(n,"toolbox",e[1]==="toolbox"),j&7&&Z(n,"selected",e[2]==e[14]&&e[1]==="program")},r(){ge=n.getBoundingClientRect()},f(){En(n),_e()},a(){_e(),_e=Dn(n,ge,An,{duration:Pt})},d(ve){ve&&E(n),ce=!1,ut(we)}}}function ir(t){let e,n,o,r,i,s=[],l=new Map,a,c,d,u=t[0];const f=h=>h[12].id;for(let h=0;h<u.length;h+=1){let p=ln(t,u,h),m=f(p);l.set(m,s[h]=an(m,p))}return{c(){e=y("div"),n=y("div"),o=C(t[1]),r=M(),i=y("div");for(let h=0;h<s.length;h+=1)s[h].c();this.h()},l(h){e=w(h,"DIV",{class:!0});var p=b(e);n=w(p,"DIV",{class:!0});var m=b(n);o=$(m,t[1]),m.forEach(E),r=F(p),i=w(p,"DIV",{class:!0});var T=b(i);for(let _=0;_<s.length;_+=1)s[_].l(T);T.forEach(E),p.forEach(E),this.h()},h(){L(n,"class","column-title svelte-1jb2xq7"),L(i,"class","column-content svelte-1jb2xq7"),L(e,"class","wrapper svelte-1jb2xq7"),Z(e,"program",t[1]==="program")},m(h,p){ne(h,e,p),g(e,n),g(n,o),g(e,r),g(e,i);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(i,null);c||(d=[Hn(a=rr.call(null,i,{items:t[0],flipDurationMs:Pt,zoneTabIndex:-1})),re(i,"consider",t[6]),re(i,"finalize",t[7])],c=!0)},p(h,[p]){if(p&2&&Ct(o,h[1]),p&831){u=h[0];for(let m=0;m<s.length;m+=1)s[m].r();s=_n(s,p,f,1,h,u,l,i,Yn,an,null,ln);for(let m=0;m<s.length;m+=1)s[m].a()}a&&tt(a.update)&&p&1&&a.update.call(null,{items:h[0],flipDurationMs:Pt,zoneTabIndex:-1}),p&2&&Z(e,"program",h[1]==="program")},i:Ye,o:Ye,d(h){h&&E(e);for(let p=0;p<s.length;p+=1)s[p].d();c=!1,ut(d)}}}const Pt=150;function lr(t,e,n){let o=-1;ke.subscribe(m=>{n(2,o=m)});let r=0;qe.subscribe(m=>{n(3,r=m)});let i=[],{name:s}=e,{items:l}=e,{onDrop:a}=e;function c(){console.log("CHANGE REP"),bn.update(m=>i)}function d(m){n(0,l=m.detail.items)}function u(m){a(m.detail.items)}function f(m){console.log("DECR"),m.indent>=50&&(m.indent-=50),m=m,a(l)}function h(m){console.log("INCREASE"),m.indent<=50*2&&(m.indent+=50),m=m,a(l)}function p(m){i[m]=yn(this),n(4,i)}return t.$$set=m=>{"name"in m&&n(1,s=m.name),"items"in m&&n(0,l=m.items),"onDrop"in m&&n(10,a=m.onDrop)},[l,s,o,r,i,c,d,u,f,h,a,p]}class ar extends We{constructor(e){super(),Ze(this,e,lr,ir,Ue,{name:1,items:0,onDrop:10})}}function cn(t,e,n){const o=t.slice();return o[6]=e[n].id,o[7]=e[n].name,o[8]=e[n].items,o[9]=e[n].indents,o[11]=n,o}function dn(t,e){let n,o,r,i,s=Ye,l;function a(...c){return e[3](e[11],e[7],...c)}return o=new ar({props:{name:e[7],items:e[8],onDrop:a}}),{key:t,first:null,c(){n=y("div"),Ce(o.$$.fragment),r=M(),this.h()},l(c){n=w(c,"DIV",{class:!0});var d=b(n);$e(o.$$.fragment,d),r=F(d),d.forEach(E),this.h()},h(){L(n,"class","column svelte-2ehquc"),Z(n,"program",e[7]==="program"),this.first=n},m(c,d){ne(c,n,d),Me(o,n,null),g(n,r),l=!0},p(c,d){e=c;const u={};d&1&&(u.name=e[7]),d&1&&(u.items=e[8]),d&1&&(u.onDrop=a),o.$set(u),(!l||d&1)&&Z(n,"program",e[7]==="program")},r(){i=n.getBoundingClientRect()},f(){En(n),s()},a(){s(),s=Dn(n,i,An,{duration:dr})},i(c){l||(ee(o.$$.fragment,c),l=!0)},o(c){se(o.$$.fragment,c),l=!1},d(c){c&&E(n),Fe(o)}}}function cr(t){let e,n=[],o=new Map,r,i=t[0];const s=l=>l[6];for(let l=0;l<i.length;l+=1){let a=cn(t,i,l),c=s(a);o.set(c,n[l]=dn(c,a))}return{c(){e=y("section");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=w(l,"SECTION",{class:!0});var a=b(e);for(let c=0;c<n.length;c+=1)n[c].l(a);a.forEach(E),this.h()},h(){L(e,"class","board svelte-2ehquc")},m(l,a){ne(l,e,a);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);r=!0},p(l,[a]){if(a&3){i=l[0],ft();for(let c=0;c<n.length;c+=1)n[c].r();n=_n(n,a,s,1,l,i,o,e,qn,dn,null,cn);for(let c=0;c<n.length;c+=1)n[c].a();ht()}},i(l){if(!r){for(let a=0;a<i.length;a+=1)ee(n[a]);r=!0}},o(l){for(let a=0;a<n.length;a+=1)se(n[a]);r=!1},d(l){l&&E(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}const dr=300;function ur(t,e,n){let{columns:o}=e,{onFinalUpdate:r}=e;function i(l,a,c){n(0,o[l].items=c,o);let d;a=="toolbox"&&(d=o[l].items,d.forEach(u=>{u.indent=0})),r([...o])}const s=(l,a,c)=>i(l,a,c);return t.$$set=l=>{"columns"in l&&n(0,o=l.columns),"onFinalUpdate"in l&&n(2,r=l.onFinalUpdate)},[o,i,r,s]}class fr extends We{constructor(e){super(),Ze(this,e,ur,cr,Ue,{columns:0,onFinalUpdate:2})}}function hr(t){let e,n,o;return n=new fr({props:{columns:t[0],onFinalUpdate:t[1]}}),{c(){e=y("div"),Ce(n.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var i=b(e);$e(n.$$.fragment,i),i.forEach(E),this.h()},h(){L(e,"class","together svelte-7io7y5")},m(r,i){ne(r,e,i),Me(n,e,null),o=!0},p(r,[i]){const s={};i&1&&(s.columns=r[0]),n.$set(s)},i(r){o||(ee(n.$$.fragment,r),o=!0)},o(r){se(n.$$.fragment,r),o=!1},d(r){r&&E(e),Fe(n)}}}function gr(t){let e=[];return t.forEach(n=>{let o;switch(n.name){case"move_up()":o="u";break;case"move_down()":o="d";break;case"move_left()":o="l";break;case"move_right()":o="r";break;case"water()":o="w";break;case"repeat ____ times:":o="repeat";break}e.push(o)}),e}function mr(t){let e=[];return t.forEach(n=>{e.push(n.indent)}),e}function pr(t,e,n){let o=0,r,i;r=[{id:1,name:"move_left()",indent:0},{id:2,name:"move_right()",indent:0},{id:3,name:"move_up()",indent:0},{id:4,name:"move_down()",indent:0},{id:5,name:"water()",indent:0}],i=[{id:"c1",name:"toolbox",items:[{id:1,name:"move_left()",indent:0},{id:2,name:"move_right()",indent:0},{id:3,name:"move_up()",indent:0},{id:4,name:"move_down()",indent:0},{id:5,name:"water()",indent:0}]},{id:"c2",name:"program",items:[]}],o>0&&r.push({id:6,name:"repeat ____ times:",indent:0}),o>0&&i[0].items.push({id:6,name:"repeat ____ times:",indent:0}),qe.subscribe(a=>{o=a,s()});function s(){console.log(" LEVEL UPDATE"),console.log(o),r=[{id:1,name:"move_left()",indent:0},{id:2,name:"move_right()",indent:0},{id:3,name:"move_up()",indent:0},{id:4,name:"move_down()",indent:0},{id:5,name:"water()",indent:0}],n(0,i=[{id:"c1",name:"toolbox",items:[{id:1,name:"move_left()",indent:0},{id:2,name:"move_right()",indent:0},{id:3,name:"move_up()",indent:0},{id:4,name:"move_down()",indent:0},{id:5,name:"water()",indent:0}]},{id:"c2",name:"program",items:[]}]),o>0&&r.push({id:6,name:"repeat ____ times:",indent:0}),o>0&&i[0].items.push({id:6,name:"repeat ____ times:",indent:0})}function l(a){console.log("HANDLE UPDATE"),console.log(a);for(let u=0;u<r.length;u++)console.log(r[u]),r[u].id+=10;a[0].items=r,n(0,i=a);let c=gr(i[1].items),d=mr(i[1].items);Tn.update(u=>d),In.update(u=>c)}return[i,l]}class _r extends We{constructor(e){super(),Ze(this,e,pr,hr,Ue,{})}}function un(t,e,n){const o=t.slice();return o[36]=e[n],o[38]=n,o}function fn(t,e,n){const o=t.slice();return o[39]=e[n],o[41]=n,o}function hn(t){let e,n,o,r,i;return o=new to({props:{name:t[1],width:"120px",height:"120px",class:"large"}}),{c(){e=y("div"),n=y("div"),Ce(o.$$.fragment),r=M(),this.h()},l(s){e=w(s,"DIV",{class:!0});var l=b(e);n=w(l,"DIV",{class:!0});var a=b(n);$e(o.$$.fragment,a),a.forEach(E),r=F(l),l.forEach(E),this.h()},h(){L(n,"class","characterSVG svelte-ayi5a8"),Z(n,"hideCell",t[5][0]!=t[38]||t[5][1]!=t[41]),L(e,"class","cell svelte-ayi5a8"),Z(e,"character",t[5][0]==t[38]&&t[5][1]==t[41]),Z(e,"sapling",t[3][t[38]][t[41]]==mn),Z(e,"watered",t[4][t[38]][t[41]]==kt)},m(s,l){ne(s,e,l),g(e,n),Me(o,n,null),g(e,r),i=!0},p(s,l){const a={};l[0]&2&&(a.name=s[1]),o.$set(a),(!i||l[0]&32)&&Z(n,"hideCell",s[5][0]!=s[38]||s[5][1]!=s[41]),(!i||l[0]&32)&&Z(e,"character",s[5][0]==s[38]&&s[5][1]==s[41]),(!i||l[0]&8)&&Z(e,"sapling",s[3][s[38]][s[41]]==mn),(!i||l[0]&16)&&Z(e,"watered",s[4][s[38]][s[41]]==kt)},i(s){i||(ee(o.$$.fragment,s),i=!0)},o(s){se(o.$$.fragment,s),i=!1},d(s){s&&E(e),Fe(o)}}}function gn(t){let e,n,o=t[36],r=[];for(let s=0;s<o.length;s+=1)r[s]=hn(fn(t,o,s));const i=s=>se(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=ot()},l(s){for(let l=0;l<r.length;l+=1)r[l].l(s);e=ot()},m(s,l){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,l);ne(s,e,l),n=!0},p(s,l){if(l[0]&58){o=s[36];let a;for(a=0;a<o.length;a+=1){const c=fn(s,o,a);r[a]?(r[a].p(c,l),ee(r[a],1)):(r[a]=hn(c),r[a].c(),ee(r[a],1),r[a].m(e.parentNode,e))}for(ft(),a=o.length;a<r.length;a+=1)i(a);ht()}},i(s){if(!n){for(let l=0;l<o.length;l+=1)ee(r[l]);n=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)se(r[l]);n=!1},d(s){wn(r,s),s&&E(e)}}}function vr(t){let e,n,o,r,i,s,l,a,c,d,u,f,h,p,m,T=t[3],_=[];for(let v=0;v<T.length;v+=1)_[v]=gn(un(t,T,v));const R=v=>se(_[v],1,1,()=>{_[v]=null});return{c(){e=y("div"),n=y("h2"),o=C("field"),r=M(),i=y("div");for(let v=0;v<_.length;v+=1)_[v].c();s=M(),l=y("div"),a=y("button"),c=C("Play"),d=M(),u=y("button"),f=C("Restart"),this.h()},l(v){e=w(v,"DIV",{class:!0});var O=b(e);n=w(O,"H2",{class:!0});var I=b(n);o=$(I,"field"),I.forEach(E),r=F(O),i=w(O,"DIV",{class:!0,style:!0});var k=b(i);for(let V=0;V<_.length;V+=1)_[V].l(k);k.forEach(E),s=F(O),l=w(O,"DIV",{class:!0});var G=b(l);a=w(G,"BUTTON",{class:!0});var S=b(a);c=$(S,"Play"),S.forEach(E),d=F(G),u=w(G,"BUTTON",{class:!0});var N=b(u);f=$(N,"Restart"),N.forEach(E),G.forEach(E),O.forEach(E),this.h()},h(){L(n,"class","svelte-ayi5a8"),L(i,"class","field svelte-ayi5a8"),ye(i,"grid-template-columns","repeat("+t[0]+", 1fr)"),ye(i,"grid-auto-rows",t[2]),L(a,"class","svelte-ayi5a8"),L(u,"class","svelte-ayi5a8"),L(l,"class","controls svelte-ayi5a8"),L(e,"class","wrapper svelte-ayi5a8")},m(v,O){ne(v,e,O),g(e,n),g(n,o),g(e,r),g(e,i);for(let I=0;I<_.length;I+=1)_[I]&&_[I].m(i,null);g(e,s),g(e,l),g(l,a),g(a,c),g(l,d),g(l,u),g(u,f),h=!0,p||(m=[re(a,"click",t[6]),re(u,"click",t[7])],p=!0)},p(v,O){if(O[0]&58){T=v[3];let I;for(I=0;I<T.length;I+=1){const k=un(v,T,I);_[I]?(_[I].p(k,O),ee(_[I],1)):(_[I]=gn(k),_[I].c(),ee(_[I],1),_[I].m(i,null))}for(ft(),I=T.length;I<_.length;I+=1)R(I);ht()}(!h||O[0]&1)&&ye(i,"grid-template-columns","repeat("+v[0]+", 1fr)"),(!h||O[0]&4)&&ye(i,"grid-auto-rows",v[2])},i(v){if(!h){for(let O=0;O<T.length;O+=1)ee(_[O]);h=!0}},o(v){_=_.filter(Boolean);for(let O=0;O<_.length;O+=1)se(_[O]);h=!1},d(v){v&&E(e),wn(_,v),p=!1,ut(m)}}}const mn=0,Er=0,kt=1;function Dr(t,e,n){let o;eo.subscribe(D=>{n(1,o=D)});let r=2,i=!1,s=0,l=0,a=0;qe.subscribe(D=>{n(8,a=D)});let c=250,d=c/r,u,f,h,p,m=!1,T={drag:"Drag the toolbox commands into the program and press play!",incorrect:"Make sure to water all the plants!",correct:"Great job! All the plants are watered! You completed Level 0!",collision:"You can't walk outside the field!","bad indent":"Your indents are not correct!","start indent":"Your first command should not be indented!"},_=-1;ke.subscribe(D=>{_=D});let R=[];In.subscribe(D=>{R=D});let v=[];Tn.subscribe(D=>{v=D});let O=[];bn.subscribe(D=>{O=D});function I(){n(3,u=[...Array(r)].map(()=>Array(r).fill(0))),n(4,f=[...Array(r)].map(()=>Array(r).fill(0))),n(5,h=[0,0])}function k(D){n(5,h=D)}function G(D){let A=T[D];On.update(W=>A)}function S(){console.log("cant move that way!"),G("collision"),U()}function N(D){const[A,W]=D;return A<0||A===r||W<0||W===r?S():k(D)}function V(D){const[A,W]=D;n(4,f[A][W]=kt,f)}function U(){clearInterval(p),ke.update(D=>-1)}function le(){if(ke.update(ge=>ge+1),i&&B(),ae(),_>=R.length){x(),U();return}console.log("step"),console.log(_);let D=R[_];const[A,W]=h;switch(D){case"r":return N([A,W+1]);case"l":return N([A,W-1]);case"u":return N([A-1,W]);case"d":return N([A+1,W]);case"w":return V([A,W]);case"repeat":i||(console.log("FOUND REPEAT"),l=O[_],s=_,i=!0);return}}function ae(){if(v[0]!=0){G("start indent"),U();return}if(v[_]>v[_-1]+50){G("bad indent"),console.log(v[_]),console.log(v[_-1]+50),console.log("INDENT 1 CASE"),U();return}if(v[_]==v[_-1]+50){if(i)return;G("bad indent"),console.log("INDENT 2 CASE"),U();return}}function B(){if(_==R.length||v[_]<=v[s]){if(l-=1,console.log(l),l<=0){i=!1;return}ke.update(D=>s)}}function x(){console.log("Success!");let D;D=q(),G(D?"correct":"incorrect")}function q(){for(let D=0;D<r;D++)for(let A=0;A<r;A++)if(f[D][A]==Er)return console.log("NOT ALL WATERED!"),!1;return console.log("ALL WATERED!"),!0}function X(){ke.update(D=>-1),m&&P(),m=!0,p=setInterval(le,750)}function P(){I()}return I(),t.$$.update=()=>{t.$$.dirty[0]&769&&(console.log("LEVEL CHANGED"),console.log(a),a==0?n(0,r=2):a==1&&n(0,r=3),n(9,c=250),n(2,d=c/r),I())},[r,o,d,u,f,h,X,P,a,c]}class yr extends We{constructor(e){super(),Ze(this,e,Dr,vr,Ue,{},null,[-1,-1])}}function pn(t){let e,n,o,r,i,s,l,a;const c=t[4].default,d=jn(c,t,t[3],null);return{c(){e=y("div"),n=y("div"),o=y("span"),r=C("×"),i=M(),d&&d.c(),this.h()},l(u){e=w(u,"DIV",{class:!0});var f=b(e);n=w(f,"DIV",{class:!0});var h=b(n);o=w(h,"SPAN",{class:!0});var p=b(o);r=$(p,"×"),p.forEach(E),i=F(h),d&&d.l(h),h.forEach(E),f.forEach(E),this.h()},h(){L(o,"class","close svelte-1tox1d6"),L(n,"class","modal svelte-1tox1d6"),L(e,"class","modal-wrapper svelte-1tox1d6")},m(u,f){ne(u,e,f),g(e,n),g(n,o),g(o,r),g(n,i),d&&d.m(n,null),s=!0,l||(a=re(o,"click",t[6]),l=!0)},p(u,f){d&&d.p&&(!s||f&8)&&Xn(d,c,u,u[3],s?Jn(c,u[3],f,null):Kn(u[3]),null)},i(u){s||(ee(d,u),s=!0)},o(u){se(d,u),s=!1},d(u){u&&E(e),d&&d.d(u),l=!1,a()}}}function wr(t){let e,n,o,r,i=t[1]&&pn(t);return{c(){i&&i.c(),e=ot()},l(s){i&&i.l(s),e=ot()},m(s,l){i&&i.m(s,l),ne(s,e,l),n=!0,o||(r=re(window,"keydown",t[5]),o=!0)},p(s,[l]){s[1]?i?(i.p(s,l),l&2&&ee(i,1)):(i=pn(s),i.c(),ee(i,1),i.m(e.parentNode,e)):i&&(ft(),se(i,1,1,()=>{i=null}),ht())},i(s){n||(ee(i),n=!0)},o(s){se(i),n=!1},d(s){i&&i.d(s),s&&E(e),o=!1,r()}}}function br(t,e,n){let{$$slots:o={},$$scope:r}=e,i=!0;function s(){n(1,i=!0)}function l(){n(1,i=!1)}const a=d=>{d.keyCode==27&&l()},c=()=>l();return t.$$set=d=>{"$$scope"in d&&n(3,r=d.$$scope)},[l,i,s,r,o,a,c]}class Tr extends We{constructor(e){super(),Ze(this,e,br,wr,Ue,{show:2,hide:0})}get show(){return this.$$.ctx[2]}get hide(){return this.$$.ctx[0]}}function Ir(t){let e,n,o,r,i,s,l,a,c,d,u,f,h,p,m,T,_,R,v,O,I,k,G,S,N,V,U,le,ae,B,x,q,X;return{c(){e=y("h2"),n=C("Welcome to The Sugar Shortage"),o=M(),r=y("div"),i=y("p"),s=C("You are visiting a sugar beet farm to help figure out why all the beet plants are dying!"),l=M(),a=y("p"),c=C("Your first task is to make sure all the plants are watered."),d=M(),u=y("p"),f=C("Using the toolbox commands on the left, construct a program to move your character around the field and water the plants."),h=M(),p=y("br"),m=M(),T=y("p"),_=C("Press "),R=y("strong"),v=C("Play"),O=C(" to activate your program, and "),I=y("strong"),k=C("Reset"),G=C(" to try again."),S=M(),N=y("br"),V=M(),U=y("p"),le=C("When all the plants are watered, you can move on to the next level!"),ae=M(),B=y("button"),x=C("Close"),this.h()},l(P){e=w(P,"H2",{style:!0});var D=b(e);n=$(D,"Welcome to The Sugar Shortage"),D.forEach(E),o=F(P),r=w(P,"DIV",{class:!0});var A=b(r);i=w(A,"P",{});var W=b(i);s=$(W,"You are visiting a sugar beet farm to help figure out why all the beet plants are dying!"),W.forEach(E),l=F(A),a=w(A,"P",{});var ge=b(a);c=$(ge,"Your first task is to make sure all the plants are watered."),ge.forEach(E),d=F(A),u=w(A,"P",{});var _e=b(u);f=$(_e,"Using the toolbox commands on the left, construct a program to move your character around the field and water the plants."),_e.forEach(E),h=F(A),p=w(A,"BR",{}),m=F(A),T=w(A,"P",{});var ce=b(T);_=$(ce,"Press "),R=w(ce,"STRONG",{});var we=b(R);v=$(we,"Play"),we.forEach(E),O=$(ce," to activate your program, and "),I=w(ce,"STRONG",{});var ze=b(I);k=$(ze,"Reset"),ze.forEach(E),G=$(ce," to try again."),ce.forEach(E),S=F(A),N=w(A,"BR",{}),V=F(A),U=w(A,"P",{});var ve=b(U);le=$(ve,"When all the plants are watered, you can move on to the next level!"),ve.forEach(E),A.forEach(E),ae=F(P),B=w(P,"BUTTON",{class:!0});var j=b(B);x=$(j,"Close"),j.forEach(E),this.h()},h(){ye(e,"margin-bottom","0.1em"),L(r,"class","ModalText svelte-fab0nk"),L(B,"class","modalButton svelte-fab0nk")},m(P,D){ne(P,e,D),g(e,n),ne(P,o,D),ne(P,r,D),g(r,i),g(i,s),g(r,l),g(r,a),g(a,c),g(r,d),g(r,u),g(u,f),g(r,h),g(r,p),g(r,m),g(r,T),g(T,_),g(T,R),g(R,v),g(T,O),g(T,I),g(I,k),g(T,G),g(r,S),g(r,N),g(r,V),g(r,U),g(U,le),ne(P,ae,D),ne(P,B,D),g(B,x),q||(X=re(B,"click",t[4]),q=!0)},p:Ye,d(P){P&&E(e),P&&E(o),P&&E(r),P&&E(ae),P&&E(B),q=!1,X()}}}function Or(t){let e,n,o,r,i,s,l,a,c,d,u,f,h,p,m,T,_,R="0",v,O,I,k="1",G,S,N,V,U,le,ae;r=new _r({}),s=new yr({});let B={$$slots:{default:[Ir]},$$scope:{ctx:t}};return a=new Tr({props:B}),t[5](a),{c(){e=y("main"),n=y("div"),o=y("div"),Ce(r.$$.fragment),i=M(),Ce(s.$$.fragment),l=M(),Ce(a.$$.fragment),c=M(),d=y("div"),u=y("button"),f=C("Show instructions"),h=M(),p=y("div"),m=C(`Level
    
          `),T=y("select"),_=y("option"),v=C(R),O=M(),I=y("option"),G=C(k),S=M(),N=y("div"),V=C(t[2]),this.h()},l(x){e=w(x,"MAIN",{class:!0});var q=b(e);n=w(q,"DIV",{class:!0});var X=b(n);o=w(X,"DIV",{class:!0});var P=b(o);$e(r.$$.fragment,P),i=F(P),$e(s.$$.fragment,P),P.forEach(E),l=F(X),$e(a.$$.fragment,X),c=F(X),d=w(X,"DIV",{class:!0});var D=b(d);u=w(D,"BUTTON",{class:!0});var A=b(u);f=$(A,"Show instructions"),A.forEach(E),h=F(D),p=w(D,"DIV",{class:!0});var W=b(p);m=$(W,`Level
    
          `),T=w(W,"SELECT",{class:!0});var ge=b(T);_=w(ge,"OPTION",{});var _e=b(_);v=$(_e,R),O=F(_e),_e.forEach(E),I=w(ge,"OPTION",{});var ce=b(I);G=$(ce,k),ce.forEach(E),ge.forEach(E),W.forEach(E),S=F(D),N=w(D,"DIV",{class:!0});var we=b(N);V=$(we,t[2]),we.forEach(E),D.forEach(E),X.forEach(E),q.forEach(E),this.h()},h(){L(o,"class","wrap svelte-fab0nk"),L(u,"class","svelte-fab0nk"),_.__value="0",_.value=_.__value,I.__value="1",I.value=I.__value,L(T,"class","levelSelect"),t[1]===void 0&&vn(()=>t[7].call(T)),L(p,"class","levelMessage svelte-fab0nk"),L(N,"class","feedback svelte-fab0nk"),L(d,"class","footerWrap svelte-fab0nk"),L(n,"class","wrapElements svelte-fab0nk"),L(e,"class","svelte-fab0nk")},m(x,q){ne(x,e,q),g(e,n),g(n,o),Me(r,o,null),g(o,i),Me(s,o,null),g(n,l),Me(a,n,null),g(n,c),g(n,d),g(d,u),g(u,f),g(d,h),g(d,p),g(p,m),g(p,T),g(T,_),g(_,v),g(_,O),g(T,I),g(I,G),nt(T,t[1],!0),g(d,S),g(d,N),g(N,V),U=!0,le||(ae=[re(u,"click",t[6]),re(T,"change",t[7]),re(T,"change",t[3])],le=!0)},p(x,[q]){const X={};q&513&&(X.$$scope={dirty:q,ctx:x}),a.$set(X),q&2&&nt(T,x[1]),(!U||q&4)&&Ct(V,x[2])},i(x){U||(ee(r.$$.fragment,x),ee(s.$$.fragment,x),ee(a.$$.fragment,x),U=!0)},o(x){se(r.$$.fragment,x),se(s.$$.fragment,x),se(a.$$.fragment,x),U=!1},d(x){x&&E(e),Fe(r),Fe(s),t[5](null),Fe(a),le=!1,ut(ae)}}}function Ar(t,e,n){let o,r=0;qe.subscribe(u=>{n(1,r=u)});let i="";On.subscribe(u=>{n(2,i=u)});function s(){qe.update(u=>r)}const l=()=>o.hide();function a(u){Qn[u?"unshift":"push"](()=>{o=u,n(0,o)})}const c=()=>o.show();function d(){r=yn(this),n(1,r)}return[o,r,i,s,l,a,c,d]}class Sr extends We{constructor(e){super(),Ze(this,e,Ar,Or,Ue,{})}}export{Sr as component};
